import{r,u as f,a as w,l as h,j as e,L as b,N as j,b as y,c as N}from"./index-AnWCcf8t.js";const B="/assets/logo-w-C4oCDWgY.png",C="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGXSURBVHgBtVU7UsMwEF3bFEkmk4gbODcwNwgnCJRUOCeAGxBKOtLRJb4BOYHNDWjp3NLJ44bCH55ANorj2GOLvBmNtCvpvdXqR9QTjDF3Op36k8nkuWncGfUASDd5nrvS3DWNNak7+YNhGG5JYJqv9F9AWhjSkhcF5qptTqcVJEniFG2sYs05X7XNsZo6B4OBPR6P6QsQ9mg0Ysj9B9LyBPIX0Y/iwM+LMVUYVYdIQ5Zld4jwXpjSHYJ4m6bpDn4GgYXcB6ZMDeBbQjg8KgBuG0Q+mjb1BIJz4zj2CntvD0C+0SEXsCxrptqlgLg4qOakAaTosbrxpQCiX5AewrpTpabIJg0gwHWdXxVwSE+AtwmcBKpASBrABjunFrgV9+ioAHL4RnoQz4hfFSkFcP0D0octReYHAjjDAaqA9GGrxt4pQh490kcgg/3lrPaKf5Y0ngwEOVNfVLNmwBIVpx6Qb1Go+g4+HPwbfDgcfqJ5Rd3wHkXRTdVZe5MRxRbRXNPf3fj5TFDOQYLKuMBp8WQ/F5GjXNZxfQPDSpauNmJLVwAAAABJRU5ErkJggg==",k="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAALISURBVHgBrVXNTxNREJ953aIRTCBoABNx5WbEZPmMBw8LeDShAQ94ovwFYDxq0jbKmRr/gJYTECGpB+NBkI16MFqxnjyy8QIi0WJLsG6742xpSbsfpCX8ks2+mffmN++9+XgIx2BTVZqbRMM0IaksyqUPEChNgCkkepE384kOLaV7caCbcktVZJ/PH+OhCrUhXigYETdHDge7I4OTBGaUd9gM9YFPZU61rX1OVCpFpfDzdn/IBIqfgNwC24iAXXl0gp3hgSBLMU9zgjQg6dZOgVDhtc3V0zDftvYp6OrAunPJJ31x3zlpBYRIx2pSq9TuqAMK+WCGCSa9yI8c7I4qMTPrdywgwkjbm49hOAY/RvoC9nuvcnDwCmTJ79/8+74dDt6110VeCwRK/mJgzt7ahsY73wHPFCxy/TTILUg+pNFyrBtu/AKpMwt7z7sicEpAY9X/G6A6IySf0YJDnC0uGJ7NEtSKAkwJOzkj7UVeN5Bk4dDhKZGXIJhQr1QQgUzrcJJKdgIxLRFZ1YlyWbdVOAfPMtc4sz7EXY1Mck0AEjjKqaJULzV1zL2WwnyMkKV4mbsMT7PdkCG/lpxYGYI6MDy7v8lu5CoHhnFVNEj5qCVE97vhSabHIrdEtX9pLFQ7eTZoJ+dU07Vwiy6sjHnwZ3B+6aCr2oowXIsT9XFG5d+cXc8OildZzKK3uYthAJfsYSd9i+Ox/oWAap+6uRCQeQNzRmtiHcDRWXUwDM0aH7Xr3oWxIMfCu10fbiB1SEAyAsrlCZHrhMbtacD8haJsAkxpD5vi1thXXrS18i11afw623k+k2eh9C6jra2TtAf5pg0Q/67w1xpZf3Q+Wp5zPJm9i3dnBFAI4CS1gPeTE8vRSo2jkjd4QZ4KPVxw81A7NI7XkJ286PI4K4UDKUgEBBcRB07B0qnI6lccDzLhKyImkveWNS+O/6WtC73gUBI/AAAAAElFTkSuQmCC",I="/assets/dentaiBottom-Cnf_grAT.png";function E(l){r.useEffect(()=>{const i="google-identity-script";if(document.getElementById(i))return;const s=document.createElement("script");s.id=i,s.src="https://accounts.google.com/gsi/client",s.async=!0,s.defer=!0,s.onload=()=>{},document.body.appendChild(s)},[l])}const D="439441591401-q7qtbasricbbmb501b4ac0ddo9a3atme.apps.googleusercontent.com",X=()=>{const l=f(),{login:i,isAuthenticated:s,initializing:c,error:A,setError:n}=w(),[u,m]=r.useState(!0),[g,x]=r.useState(!1);E(),r.useEffect(()=>{!c&&s&&l("/dentgo-gpt-home",{replace:!0})},[c,s,l]);const d=r.useCallback(async t=>{const{credential:a}=t;if(!a){n("No credentials returned. Please try again.");return}try{const o=await h(a);i(o),l("/dentgo-gpt-home",{replace:!0})}catch(o){console.error("Google login error:",o),n((o==null?void 0:o.message)||"Authentication failed. Please try again or use a different browser mode.")}},[i,l,n]);return r.useEffect(()=>{let t=null;const a=()=>{var o,p;(p=(o=window.google)==null?void 0:o.accounts)!=null&&p.id?(window.google.accounts.id.initialize({client_id:D,callback:d,ux_mode:"popup"}),x(!0),m(!1)):t=window.setTimeout(a,100)};return a(),()=>{t&&clearTimeout(t)}},[d]),c||u?e.jsx(b,{}):!c&&s?e.jsx(j,{to:"/dentgo-gpt-home",replace:!0}):e.jsxs("div",{className:"bg-white h-screen w-full overflow-hidden flex flex-col relative",children:[e.jsxs("div",{className:"flex-none bg-primary relative",children:[e.jsx("header",{className:"pt-6 px-4 flex items-center",children:e.jsx("button",{onClick:()=>l(-1),className:"p-0","aria-label":"Go Back",children:e.jsx("img",{src:y,alt:"Go Back",className:"w-6 h-auto"})})}),e.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[e.jsx("img",{src:B,alt:"Dentgo logo",className:"w-24 h-auto object-contain"}),e.jsx("h1",{className:"text-white text-2xl font-semibold mt-3 text-center",children:"DentGo AI"})]})]}),e.jsx("div",{className:"flex-1 w-full flex flex-col items-center justify-start px-4 pt-4 relative z-10",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("h2",{className:"text-center text-gray-800 text-2xl font-semibold mb-4",children:"Welcome"}),A&&e.jsx("div",{role:"alert",className:"bg-yellow-100 text-yellow-700 p-3 mb-4 rounded cursor-pointer",onClick:()=>n(null),onKeyDown:t=>{(t.key==="Enter"||t.key===" ")&&n(null)},tabIndex:0,children:A}),e.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[e.jsxs("button",{type:"button",disabled:!g,className:`
                flex items-center justify-center gap-3 w-full py-3 border border-gray-300 rounded-lg 
                bg-white font-semibold text-base text-black transition
                ${g?"hover:bg-gray-100":"opacity-50 cursor-not-allowed"}
              `,onClick:()=>{var t,a;if((a=(t=window.google)==null?void 0:t.accounts)!=null&&a.id&&g)try{window.google.accounts.id.prompt()}catch(o){o.name!=="AbortError"&&(console.error("Google prompt error:",o),n("Unexpected error when opening Google login. Please try again."))}else alert("Google login is not ready yet.")},children:[e.jsx("img",{src:k,alt:"Google logo",className:"w-5 h-5"}),e.jsx("span",{children:"Continue with Google"})]}),e.jsxs("button",{type:"button",className:`\r
                flex items-center justify-center gap-3 w-full py-3 border border-gray-300 \r
                rounded-lg bg-white font-semibold text-base text-black transition hover:bg-gray-100\r
              `,onClick:async()=>{try{N()}catch(t){console.error("Apple login error:",t),n((t==null?void 0:t.message)||"Apple authentication failed. Please try again.")}},children:[e.jsx("img",{src:C,alt:"Apple logo",className:"w-5 h-5"}),e.jsx("span",{children:"Continue with Apple"})]})]})]})}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1/3 overflow-hidden",children:e.jsx("img",{src:I,alt:"Dental AI graphic",className:"w-full h-full object-cover"})})]})};export{X as default};
//# sourceMappingURL=Login-eHtWjmfv.js.map
