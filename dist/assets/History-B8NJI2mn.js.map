{"version":3,"file":"History-B8NJI2mn.js","sources":["../../src/assets/images/chat-menu-img.png","../../src/pages/History.tsx"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAETSURBVHgB3VRtDYMwEL1MAQ6GBKQwBzhYHTAH4IQ5qATmoJkCJNzacA23rdeWLtkPXnIh4T5f+3oAhwYiVtaUtcmawQ2G/nVQCpvcWlswDbO7kU0YWAFNLGrmb1xRfGfV5xbvKcFNrzLiFW5Mh1Rwx4o3kAli5Ju0sUBPWUX8BmQmfrgKItObxAAxvxYHJNkh/iA9xuIecs7kzD77QI1aPAWvtUSB6BGF6pzgX2AKOkMhSK4Os//HGTzoe4Fy+Pt7QqC7V4CWsjNkakQl4ro5F1HHkHxoV1FBLKhlr7F0VXSp4JE1yVl2V1b8BjlwgbjB4LpGGuav6c40ixthD/B730tw07dQCmrk9tT8wWoiFhUcGi+tgUV1/9VZ4wAAAABJRU5ErkJggg==\"","// src/pages/History.tsx\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Loader from \"@components/ui/Loader\";\r\nimport chatMenuImg from \"../assets/images/chat-menu-img.png\";\r\nimport { fetchChatSessions } from \"../api/chats\";\r\n\r\ninterface ChatSession {\r\n  id: number;\r\n  title?: string;\r\n  startedAt: string;\r\n  endedAt?: string | null;\r\n}\r\n\r\nexport default function History() {\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [sessions, setSessions] = useState<ChatSession[]>([]);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    fetchChatSessions()\r\n      .then((data) => setSessions(data))\r\n      .catch((err) => setError(err.message || \"Failed to load history\"))\r\n      .finally(() => setLoading(false));\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return <Loader fullscreen />;\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"bg-gray-100 dark:bg-gray-900 min-h-screen pb-4 flex flex-col\">\r\n        <div className=\"mx-auto max-w-3xl px-4\">\r\n          <h2 className=\"text-red-500 text-base font-medium mt-10\">\r\n            Error: {error}\r\n          </h2>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const renderList = (items: ChatSession[], isEnded: boolean) =>\r\n    items.map((s) => (\r\n      <Link\r\n        key={s.id}\r\n        to={`/dentgo-chat?sessionId=${s.id}`}\r\n        className=\"flex items-center mb-4\"\r\n      >\r\n        <img src={chatMenuImg} alt=\"Chat icon\" className=\"w-6 h-6 mr-3\" />\r\n        <div>\r\n          <h3 className=\"text-gray-800 dark:text-gray-200 text-base font-bold leading-6 pb-1\">\r\n            {s.title ?? `Chat #${s.id}`}\r\n          </h3>\r\n          <p className=\"text-gray-500 dark:text-gray-400 text-sm leading-5\">\r\n            {isEnded\r\n              ? `Ended ${new Date(s.endedAt!).toLocaleString()}`\r\n              : `Started ${new Date(s.startedAt).toLocaleString()}`}\r\n          </p>\r\n        </div>\r\n      </Link>\r\n    ));\r\n\r\n  const active = sessions.filter((s) => !s.endedAt);\r\n  const ended = sessions.filter((s) => !!s.endedAt);\r\n\r\n  return (\r\n    <div className=\"bg-gray-100 dark:bg-gray-900 min-h-screen pb-4 flex flex-col\">\r\n      <div className=\"mx-auto max-w-3xl px-4 w-full\">\r\n        <div className=\"bg-white dark:bg-gray-800 mt-5 rounded-t-3xl px-4 flex flex-col h-[calc(100vh-90px)] overflow-y-auto w-full\">\r\n          <div className=\"pt-4\">\r\n            <h2 className=\"text-gray-800 dark:text-gray-100 text-xl font-semibold leading-7\">\r\n              Active Chats\r\n            </h2>\r\n            {active.length > 0 ? (\r\n              renderList(active, false)\r\n            ) : (\r\n              <p className=\"text-gray-500 dark:text-gray-400 text-sm leading-5 mb-4\">\r\n                No active chats.\r\n              </p>\r\n            )}\r\n\r\n            <h2 className=\"text-gray-800 dark:text-gray-100 text-xl font-semibold leading-7 pt-6\">\r\n              Ended Chats\r\n            </h2>\r\n            {ended.length > 0 ? (\r\n              renderList(ended, true)\r\n            ) : (\r\n              <p className=\"text-gray-500 dark:text-gray-400 text-sm leading-5\">\r\n                No ended chats.\r\n              </p>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["chatMenuImg","History","loading","setLoading","useState","sessions","setSessions","error","setError","useEffect","fetchChatSessions","data","err","jsx","Loader","jsxs","renderList","items","isEnded","s","Link","active","ended"],"mappings":"qGAAA,MAAeA,EAAA,yhBCef,SAAwBC,GAAU,CAChC,KAAM,CAACC,EAASC,CAAU,EAAIC,EAAAA,SAAkB,EAAI,EAC9C,CAACC,EAAUC,CAAW,EAAIF,EAAAA,SAAwB,CAAA,CAAE,EACpD,CAACG,EAAOC,CAAQ,EAAIJ,EAAAA,SAAwB,IAAI,EAStD,GAPAK,EAAAA,UAAU,IAAM,CACIC,EAAA,EACf,KAAMC,GAASL,EAAYK,CAAI,CAAC,EAChC,MAAOC,GAAQJ,EAASI,EAAI,SAAW,wBAAwB,CAAC,EAChE,QAAQ,IAAMT,EAAW,EAAK,CAAC,CACpC,EAAG,EAAE,EAEDD,EACK,OAAAW,EAAA,IAACC,EAAO,CAAA,WAAU,EAAC,CAAA,EAG5B,GAAIP,EAEA,OAAAM,EAAAA,IAAC,MAAI,CAAA,UAAU,+DACb,SAAAA,EAAAA,IAAC,MAAI,CAAA,UAAU,yBACb,SAAAE,EAAA,KAAC,KAAG,CAAA,UAAU,2CAA2C,SAAA,CAAA,UAC/CR,CAAA,CACV,CAAA,CACF,CAAA,EACF,EAIJ,MAAMS,EAAa,CAACC,EAAsBC,IACxCD,EAAM,IAAKE,GACTJ,EAAA,KAACK,EAAA,CAEC,GAAI,0BAA0BD,EAAE,EAAE,GAClC,UAAU,yBAEV,SAAA,CAAAN,MAAC,OAAI,IAAKb,EAAa,IAAI,YAAY,UAAU,eAAe,SAC/D,MACC,CAAA,SAAA,CAACa,EAAAA,IAAA,KAAA,CAAG,UAAU,sEACX,SAAAM,EAAE,OAAS,SAASA,EAAE,EAAE,EAC3B,CAAA,EACAN,EAAAA,IAAC,KAAE,UAAU,qDACV,WACG,SAAS,IAAI,KAAKM,EAAE,OAAQ,EAAE,gBAAgB,GAC9C,WAAW,IAAI,KAAKA,EAAE,SAAS,EAAE,eAAgB,CAAA,EACvD,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,EAdKA,EAAE,EAAA,CAgBV,EAEGE,EAAShB,EAAS,OAAQc,GAAM,CAACA,EAAE,OAAO,EAC1CG,EAAQjB,EAAS,OAAQc,GAAM,CAAC,CAACA,EAAE,OAAO,EAEhD,OACGN,MAAA,MAAA,CAAI,UAAU,+DACb,eAAC,MAAI,CAAA,UAAU,gCACb,SAAAA,EAAA,IAAC,OAAI,UAAU,8GACb,SAACE,OAAA,MAAA,CAAI,UAAU,OACb,SAAA,CAACF,EAAA,IAAA,KAAA,CAAG,UAAU,mEAAmE,SAEjF,eAAA,EACCQ,EAAO,OAAS,EACfL,EAAWK,EAAQ,EAAK,EAEvBR,MAAA,IAAA,CAAE,UAAU,0DAA0D,SAEvE,kBAAA,CAAA,EAGDA,EAAA,IAAA,KAAA,CAAG,UAAU,wEAAwE,SAEtF,cAAA,EACCS,EAAM,OAAS,EACdN,EAAWM,EAAO,EAAI,EAErBT,EAAA,IAAA,IAAA,CAAE,UAAU,qDAAqD,SAElE,iBAAA,CAAA,CAAA,EAEJ,CAAA,CACF,CACF,CAAA,EACF,CAEJ"}