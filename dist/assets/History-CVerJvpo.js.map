{"version":3,"file":"History-CVerJvpo.js","sources":["../../src/pages/History.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport Loader from \"../components/ui/Loader\";\r\nimport buttonBack from \"../assets/images/Button-Back.png\";\r\nimport chatMenuImg from \"../assets/images/chat-menu-img.png\";\r\nimport { fetchChatSessions } from \"../api/chats\";\r\n\r\nexport default function History() {\r\n  const navigate = useNavigate();\r\n  const [loading, setLoading] = useState(true);\r\n  const [sessions, setSessions] = useState([]);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetchChatSessions()\r\n      .then((data) => setSessions(data))\r\n      .catch((err) => setError(err.message || \"Failed to load history\"))\r\n      .finally(() => setLoading(false));\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return <Loader />;\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"bg-gray-100 min-h-screen pb-4 flex flex-col\">\r\n        <div className=\"bg-blue-800 pt-4 pb-8\">\r\n          <div className=\"mx-auto max-w-lg px-4\">\r\n            <button className=\"p-0 mb-3\" onClick={() => navigate(-1)}>\r\n              <img src={buttonBack} alt=\"Back\" className=\"w-8 h-auto\" />\r\n            </button>\r\n            <h2 className=\"text-red text-base font-medium\">Error: {error}</h2>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const renderList = (items, isEnded) =>\r\n    items.map((s) => (\r\n      <Link\r\n        key={s.id}\r\n        to={`/dentgo-chat?sessionId=${s.id}`}\r\n        className=\"flex items-center mb-3\"\r\n      >\r\n        <img\r\n          src={chatMenuImg}\r\n          alt=\"Chat icon\"\r\n          className=\"w-6 h-6 mr-3\"\r\n        />\r\n        <div>\r\n          <h3 className=\"text-gray-800 font-sans text-base font-bold leading-6 pb-1\">\r\n            {s.title ?? `Chat #${s.id}`}\r\n          </h3>\r\n          <p className=\"text-gray-500 text-sm leading-5\">\r\n            {isEnded\r\n              ? `Ended ${new Date(s.endedAt).toLocaleString()}`\r\n              : `Started ${new Date(s.startedAt).toLocaleString()}`}\r\n          </p>\r\n        </div>\r\n      </Link>\r\n    ));\r\n\r\n  const active = sessions.filter((s) => !s.endedAt);\r\n  const ended = sessions.filter((s) => !!s.endedAt);\r\n\r\n  return (\r\n    <div className=\"bg-gray-100 min-h-screen pb-4 flex flex-col\">\r\n      <div className=\"bg-blue-800 pt-4 pb-8\">\r\n        <div className=\"mx-auto max-w-lg px-4\">\r\n          <div className=\"flex items-center mb-4\">\r\n            <button className=\"p-0 mr-2\" onClick={() => navigate(-1)}>\r\n              <img src={buttonBack} alt=\"Back\" className=\"w-8 h-auto\" />\r\n            </button>\r\n            <h1 className=\"text-white text-lg font-medium leading-6\">\r\n              History\r\n            </h1>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"bg-white mt-5 rounded-t-3xl px-4 flex flex-col h-[calc(100vh-90px)] overflow-y-auto\">\r\n        <div className=\"pt-4\">\r\n          <h2 className=\"text-gray-800 text-xl font-semibold leading-7\">\r\n            Active Chats\r\n          </h2>\r\n          {active.length > 0 ? (\r\n            renderList(active, false)\r\n          ) : (\r\n            <p className=\"text-gray-500 text-sm leading-5\">\r\n              No active chats.\r\n            </p>\r\n          )}\r\n          <h2 className=\"text-gray-800 text-xl font-semibold leading-7 pt-6\">\r\n            Ended Chats\r\n          </h2>\r\n          {ended.length > 0 ? (\r\n            renderList(ended, true)\r\n          ) : (\r\n            <p className=\"text-gray-500 text-sm leading-5\">\r\n              No ended chats.\r\n            </p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["History","navigate","useNavigate","loading","setLoading","useState","sessions","setSessions","error","setError","useEffect","fetchChatSessions","data","err","Loader","jsx","jsxs","buttonBack","renderList","items","isEnded","s","Link","chatMenuImg","active","ended"],"mappings":"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"}