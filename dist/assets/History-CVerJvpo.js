import{u,r as a,j as e,L as j,b as o,d as N}from"./index-AnWCcf8t.js";import{a as b,c as p}from"./chat-menu-img-DKrgWNtQ.js";function w(){const l=u(),[x,m]=a.useState(!0),[n,h]=a.useState([]),[i,g]=a.useState(null);if(a.useEffect(()=>{b().then(s=>h(s)).catch(s=>g(s.message||"Failed to load history")).finally(()=>m(!1))},[]),x)return e.jsx(j,{});if(i)return e.jsx("div",{className:"bg-gray-100 min-h-screen pb-4 flex flex-col",children:e.jsx("div",{className:"bg-blue-800 pt-4 pb-8",children:e.jsxs("div",{className:"mx-auto max-w-lg px-4",children:[e.jsx("button",{className:"p-0 mb-3",onClick:()=>l(-1),children:e.jsx("img",{src:o,alt:"Back",className:"w-8 h-auto"})}),e.jsxs("h2",{className:"text-red text-base font-medium",children:["Error: ",i]})]})})});const c=(s,f)=>s.map(t=>e.jsxs(N,{to:`/dentgo-chat?sessionId=${t.id}`,className:"flex items-center mb-3",children:[e.jsx("img",{src:p,alt:"Chat icon",className:"w-6 h-6 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-800 font-sans text-base font-bold leading-6 pb-1",children:t.title??`Chat #${t.id}`}),e.jsx("p",{className:"text-gray-500 text-sm leading-5",children:f?`Ended ${new Date(t.endedAt).toLocaleString()}`:`Started ${new Date(t.startedAt).toLocaleString()}`})]})]},t.id)),r=n.filter(s=>!s.endedAt),d=n.filter(s=>!!s.endedAt);return e.jsxs("div",{className:"bg-gray-100 min-h-screen pb-4 flex flex-col",children:[e.jsx("div",{className:"bg-blue-800 pt-4 pb-8",children:e.jsx("div",{className:"mx-auto max-w-lg px-4",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("button",{className:"p-0 mr-2",onClick:()=>l(-1),children:e.jsx("img",{src:o,alt:"Back",className:"w-8 h-auto"})}),e.jsx("h1",{className:"text-white text-lg font-medium leading-6",children:"History"})]})})}),e.jsx("div",{className:"bg-white mt-5 rounded-t-3xl px-4 flex flex-col h-[calc(100vh-90px)] overflow-y-auto",children:e.jsxs("div",{className:"pt-4",children:[e.jsx("h2",{className:"text-gray-800 text-xl font-semibold leading-7",children:"Active Chats"}),r.length>0?c(r,!1):e.jsx("p",{className:"text-gray-500 text-sm leading-5",children:"No active chats."}),e.jsx("h2",{className:"text-gray-800 text-xl font-semibold leading-7 pt-6",children:"Ended Chats"}),d.length>0?c(d,!0):e.jsx("p",{className:"text-gray-500 text-sm leading-5",children:"No ended chats."})]})})]})}export{w as default};
//# sourceMappingURL=History-CVerJvpo.js.map
